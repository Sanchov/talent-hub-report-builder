<div class="json-parser-container">
  <form [formGroup]="jsonForm" (ngSubmit)="parseJson()">
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Paste your JSON here</mat-label>
      <textarea
        matInput
        formControlName="jsonInput"
        placeholder='{
  "competencies": [...],
  "sections": [...]
}'
        rows="15"
        class="json-textarea"
        (focus)="isTextareaFocused = true"
        (blur)="isTextareaFocused = false"
      ></textarea>
    </mat-form-field>

    <div *ngIf="errorMessage" class="error-message">
      {{ errorMessage }}
    </div>

    <div class="button-group">
      <button
        mat-raised-button
        color="primary"
        type="submit"
        [disabled]="jsonForm.invalid"
      >
        Parse JSON
      </button>
      <button
        mat-raised-button
        color="warn"
        type="button"
        (click)="clearField()"
      >
        Clear
      </button>
      <button
        mat-raised-button
        color="accent"
        type="button"
        (click)="refreshJson(formJson)"
        *ngIf="isTextareaFocused"
      >
        Refresh from Form
      </button>
    </div>
  </form>
</div>
